"use strict";(globalThis.webpackChunkdocs_website=globalThis.webpackChunkdocs_website||[]).push([[7165],{6211:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"system-administration/configuration/import","title":"Import Configuration","description":"Configure data import settings including chunked uploads for large files.","source":"@site/docs/system-administration/configuration/import.md","sourceDirName":"system-administration/configuration","slug":"/system-administration/configuration/import","permalink":"/geopulse/docs/system-administration/configuration/import","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Import Configuration","description":"Configure data import settings including chunked uploads for large files."},"sidebar":"docsSidebar","previous":{"title":"Frontend Nginx Configuration","permalink":"/geopulse/docs/system-administration/configuration/frontend"},"next":{"title":"GPS Data Filtering","permalink":"/geopulse/docs/system-administration/configuration/gps-data-filtering"}}');var r=i(4848),l=i(8453);const d={title:"Import Configuration",description:"Configure data import settings including chunked uploads for large files."},t="Import Configuration",o={},c=[{value:"Overview",id:"overview",level:2},{value:"Environment Variables",id:"environment-variables",level:2},{value:"Batch Processing",id:"batch-processing",level:3},{value:"Temporary File Storage",id:"temporary-file-storage",level:3},{value:"Chunked Uploads",id:"chunked-uploads",level:3},{value:"Configuration Examples",id:"configuration-examples",level:2},{value:"Docker Compose",id:"docker-compose",level:3},{value:"Kubernetes / Helm",id:"kubernetes--helm",level:3},{value:"Performance Tuning",id:"performance-tuning",level:2},{value:"For Large Imports (&gt;1GB)",id:"for-large-imports-1gb",level:3},{value:"For High-Throughput Systems",id:"for-high-throughput-systems",level:3},{value:"For Memory-Constrained Systems",id:"for-memory-constrained-systems",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Upload fails with &quot;Request Entity Too Large&quot;",id:"upload-fails-with-request-entity-too-large",level:3},{value:"Upload times out",id:"upload-times-out",level:3},{value:"Disk space fills up during imports",id:"disk-space-fills-up-during-imports",level:3}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"import-configuration",children:"Import Configuration"})}),"\n",(0,r.jsx)(n.p,{children:"GeoPulse provides configurable import settings to handle files of various sizes efficiently. This page covers all import-related environment variables."}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"The import system supports:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Streaming parsers"})," - Process files of any size with minimal memory usage"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Chunked uploads"})," - Bypass CDN upload limits (e.g., Cloudflare's 100MB limit) by splitting large files"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Temporary file storage"})," - Handle large files without loading them entirely into memory"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,r.jsx)(n.h3,{id:"batch-processing",children:"Batch Processing"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Variable"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"GEOPULSE_IMPORT_BULK_INSERT_BATCH_SIZE"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"500"})}),(0,r.jsx)(n.td,{children:"Number of GPS points to insert in a single database batch operation"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"GEOPULSE_IMPORT_MERGE_BATCH_SIZE"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"250"})}),(0,r.jsx)(n.td,{children:"Batch size when merging data with duplicate detection"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"GEOPULSE_IMPORT_GEOJSON_STREAMING_BATCH_SIZE"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"500"})}),(0,r.jsx)(n.td,{children:"Batch size for streaming GeoJSON parser"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"GEOPULSE_IMPORT_GOOGLETIMELINE_STREAMING_BATCH_SIZE"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"500"})}),(0,r.jsx)(n.td,{children:"Batch size for streaming Google Timeline parser"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"GEOPULSE_IMPORT_GPX_STREAMING_BATCH_SIZE"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"500"})}),(0,r.jsx)(n.td,{children:"Batch size for streaming GPX parser"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"GEOPULSE_IMPORT_CSV_STREAMING_BATCH_SIZE"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"500"})}),(0,r.jsx)(n.td,{children:"Batch size for streaming CSV parser"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"GEOPULSE_IMPORT_OWNTRACKS_STREAMING_BATCH_SIZE"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"500"})}),(0,r.jsx)(n.td,{children:"Batch size for streaming OwnTracks parser"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"temporary-file-storage",children:"Temporary File Storage"}),"\n",(0,r.jsx)(n.p,{children:"For large files, GeoPulse uses temporary file storage to avoid memory issues:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Variable"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"GEOPULSE_IMPORT_TEMP_DIR"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/tmp/geopulse/imports"})}),(0,r.jsx)(n.td,{children:"Directory for temporary import files"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"GEOPULSE_IMPORT_LARGE_FILE_THRESHOLD_MB"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"100"})}),(0,r.jsx)(n.td,{children:"Files larger than this are stored as temp files instead of in memory"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"GEOPULSE_IMPORT_TEMP_FILE_RETENTION_HOURS"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"24"})}),(0,r.jsx)(n.td,{children:"How long to keep temporary import files before cleanup"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"chunked-uploads",children:"Chunked Uploads"}),"\n",(0,r.jsx)(n.p,{children:"Chunked uploads allow importing files larger than CDN limits (e.g., Cloudflare's 100MB limit). Files are split into smaller chunks on the frontend and reassembled on the backend."}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Variable"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"GEOPULSE_IMPORT_CHUNK_SIZE_MB"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"50"})}),(0,r.jsx)(n.td,{children:"Size of each upload chunk in megabytes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"GEOPULSE_IMPORT_MAX_FILE_SIZE_GB"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"10"})}),(0,r.jsx)(n.td,{children:"Maximum file size allowed for imports"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"GEOPULSE_IMPORT_UPLOAD_TIMEOUT_HOURS"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"2"})}),(0,r.jsx)(n.td,{children:"How long an upload session remains valid"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"GEOPULSE_IMPORT_UPLOAD_CLEANUP_MINUTES"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"15"})}),(0,r.jsx)(n.td,{children:"Interval for cleaning up expired upload sessions"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"GEOPULSE_IMPORT_CHUNKS_DIR"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/tmp/geopulse/chunks"})}),(0,r.jsx)(n.td,{children:"Directory for storing upload chunks during assembly"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"configuration-examples",children:"Configuration Examples"}),"\n",(0,r.jsx)(n.h3,{id:"docker-compose",children:"Docker Compose"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"services:\n  geopulse-backend:\n    environment:\n      # Allow larger files (up to 20GB)\n      GEOPULSE_IMPORT_MAX_FILE_SIZE_GB: 20\n\n      # Increase chunk size for faster uploads on good connections\n      GEOPULSE_IMPORT_CHUNK_SIZE_MB: 100\n\n      # Longer timeout for slow connections\n      GEOPULSE_IMPORT_UPLOAD_TIMEOUT_HOURS: 4\n\n      # Custom temp directories (useful for persistent storage)\n      GEOPULSE_IMPORT_TEMP_DIR: /data/geopulse/imports\n      GEOPULSE_IMPORT_CHUNKS_DIR: /data/geopulse/chunks\n"})}),"\n",(0,r.jsx)(n.h3,{id:"kubernetes--helm",children:"Kubernetes / Helm"}),"\n",(0,r.jsxs)(n.p,{children:["In your ",(0,r.jsx)(n.code,{children:"values.yaml"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'backend:\n  env:\n    GEOPULSE_IMPORT_MAX_FILE_SIZE_GB: "20"\n    GEOPULSE_IMPORT_CHUNK_SIZE_MB: "100"\n    GEOPULSE_IMPORT_UPLOAD_TIMEOUT_HOURS: "4"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"performance-tuning",children:"Performance Tuning"}),"\n",(0,r.jsx)(n.h3,{id:"for-large-imports-1gb",children:"For Large Imports (>1GB)"}),"\n",(0,r.jsx)(n.p,{children:"If you regularly import large files:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Increase max file size:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GEOPULSE_IMPORT_MAX_FILE_SIZE_GB=20\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Increase upload timeout"})," for slow connections:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GEOPULSE_IMPORT_UPLOAD_TIMEOUT_HOURS=4\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"for-high-throughput-systems",children:"For High-Throughput Systems"}),"\n",(0,r.jsx)(n.p,{children:"If you have many concurrent imports:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Increase batch sizes"})," for faster processing:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GEOPULSE_IMPORT_BULK_INSERT_BATCH_SIZE=1000\nGEOPULSE_IMPORT_MERGE_BATCH_SIZE=500\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"More frequent cleanup"})," to free disk space:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GEOPULSE_IMPORT_UPLOAD_CLEANUP_MINUTES=5\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"for-memory-constrained-systems",children:"For Memory-Constrained Systems"}),"\n",(0,r.jsx)(n.p,{children:"If running on limited RAM:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Lower the large file threshold"})," to use temp files more often:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GEOPULSE_IMPORT_LARGE_FILE_THRESHOLD_MB=50\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Reduce batch sizes:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GEOPULSE_IMPORT_BULK_INSERT_BATCH_SIZE=250\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{title:"Cleanup",type:"tip",children:(0,r.jsxs)(n.p,{children:["Temporary files are automatically cleaned up after successful imports. Failed or abandoned uploads are cleaned up based on ",(0,r.jsx)(n.code,{children:"GEOPULSE_IMPORT_UPLOAD_CLEANUP_MINUTES"})," and ",(0,r.jsx)(n.code,{children:"GEOPULSE_IMPORT_TEMP_FILE_RETENTION_HOURS"}),"."]})}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"upload-fails-with-request-entity-too-large",children:'Upload fails with "Request Entity Too Large"'}),"\n",(0,r.jsxs)(n.p,{children:["This is typically a frontend (Nginx) limit, not a backend limit. See ",(0,r.jsx)(n.a,{href:"/docs/system-administration/configuration/frontend",children:"Frontend Configuration"})," to increase ",(0,r.jsx)(n.code,{children:"CLIENT_MAX_BODY_SIZE"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"upload-times-out",children:"Upload times out"}),"\n",(0,r.jsx)(n.p,{children:"Increase the upload timeout:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GEOPULSE_IMPORT_UPLOAD_TIMEOUT_HOURS=4\n"})}),"\n",(0,r.jsx)(n.h3,{id:"disk-space-fills-up-during-imports",children:"Disk space fills up during imports"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Ensure cleanup is running frequently:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GEOPULSE_IMPORT_UPLOAD_CLEANUP_MINUTES=5\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Reduce temp file retention:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GEOPULSE_IMPORT_TEMP_FILE_RETENTION_HOURS=12\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Use a dedicated volume with sufficient space for temp directories."}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>t});var s=i(6540);const r={},l=s.createContext(r);function d(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);