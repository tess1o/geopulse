"use strict";(globalThis.webpackChunkdocs_website=globalThis.webpackChunkdocs_website||[]).push([[719],{1963:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"deployment/helm","title":"GeoPulse Helm Chart","description":"This Helm chart deploys GeoPulse, a self-hosted location tracking and analysis platform, to Kubernetes.","source":"@site/docs/deployment/helm.md","sourceDirName":"deployment","slug":"/deployment/helm","permalink":"/geopulse/docs/deployment/helm","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Kubernetes Deployment","permalink":"/geopulse/docs/deployment/kubernetes-deployment"},"next":{"title":"Overview","permalink":"/geopulse/docs/system-configuration/overview"}}');var r=n(4848),i=n(8453);const t={},d="GeoPulse Helm Chart",c={},o=[{value:"Features",id:"features",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Manual Installation (Advanced)",id:"manual-installation-advanced",level:2},{value:"1. Clone the Repository",id:"1-clone-the-repository",level:3},{value:"2. Install the Chart",id:"2-install-the-chart",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Common Configuration Examples",id:"common-configuration-examples",level:3},{value:"Minimal Setup (Local Testing)",id:"minimal-setup-local-testing",level:4},{value:"Production Setup with Ingress",id:"production-setup-with-ingress",level:4},{value:"Enable MQTT Broker",id:"enable-mqtt-broker",level:4},{value:"Use External PostgreSQL",id:"use-external-postgresql",level:4},{value:"Enable OIDC Authentication",id:"enable-oidc-authentication",level:4},{value:"Configuration Parameters",id:"configuration-parameters",level:2},{value:"Global Parameters",id:"global-parameters",level:3},{value:"Backend Parameters",id:"backend-parameters",level:3},{value:"Frontend Parameters",id:"frontend-parameters",level:3},{value:"PostgreSQL Parameters",id:"postgresql-parameters",level:3},{value:"MQTT (Mosquitto) Parameters",id:"mqtt-mosquitto-parameters",level:3},{value:"Ingress Parameters",id:"ingress-parameters",level:3},{value:"Application Configuration",id:"application-configuration",level:3},{value:"Upgrading",id:"upgrading",level:2},{value:"Uninstalling",id:"uninstalling",level:2},{value:"Testing",id:"testing",level:2},{value:"Accessing GeoPulse",id:"accessing-geopulse",level:2},{value:"With Ingress",id:"with-ingress",level:3},{value:"Without Ingress (Port Forward)",id:"without-ingress-port-forward",level:3},{value:"With LoadBalancer",id:"with-loadbalancer",level:3},{value:"Persistence",id:"persistence",level:2},{value:"Security",id:"security",level:2},{value:"Monitoring",id:"monitoring",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Pods not starting",id:"pods-not-starting",level:3},{value:"Database connection issues",id:"database-connection-issues",level:3},{value:"JWT key issues",id:"jwt-key-issues",level:3},{value:"MQTT not working",id:"mqtt-not-working",level:3},{value:"Support",id:"support",level:2},{value:"License",id:"license",level:2}];function a(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"geopulse-helm-chart",children:"GeoPulse Helm Chart"})}),"\n",(0,r.jsx)(s.p,{children:"This Helm chart deploys GeoPulse, a self-hosted location tracking and analysis platform, to Kubernetes."}),"\n",(0,r.jsx)(s.h2,{id:"features",children:"Features"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Full Stack Deployment"}),": Backend (Java/Quarkus in Native mode), Frontend (Vue.js), PostgreSQL with PostGIS"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Optional MQTT Support"}),": Conditional Mosquitto MQTT broker deployment"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Production Ready"}),": Health checks, resource limits, persistent storage"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Flexible Configuration"}),": Extensive values.yaml for customization"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Security"}),": Automatic JWT key generation, secrets management"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Ingress Support"}),": Optional ingress with TLS"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"High Availability Ready"}),": Support for replicas and pod disruption budgets"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Kubernetes 1.19+"}),"\n",(0,r.jsx)(s.li,{children:"Helm 3.2.0+"}),"\n",(0,r.jsx)(s.li,{children:"PV provisioner support in the underlying infrastructure (for persistence)"}),"\n",(0,r.jsx)(s.li,{children:"(Optional) Ingress controller for external access"}),"\n",(0,r.jsx)(s.li,{children:"(Optional) cert-manager for TLS certificates"}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"manual-installation-advanced",children:"Manual Installation (Advanced)"}),"\n",(0,r.jsxs)(s.p,{children:["This section describes how to install the chart directly with Helm, bypassing the interactive scripts. This is intended\nfor advanced users or automated workflows. For a simpler, interactive setup, please see the *\n*",(0,r.jsx)(s.a,{href:"/geopulse/docs/deployment/kubernetes-deployment",children:"Kubernetes Deployment Guide"}),"**."]}),"\n",(0,r.jsx)(s.h3,{id:"1-clone-the-repository",children:"1. Clone the Repository"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"git clone https://github.com/tess1o/GeoPulse.git\ncd GeoPulse\n"})}),"\n",(0,r.jsx)(s.h3,{id:"2-install-the-chart",children:"2. Install the Chart"}),"\n",(0,r.jsxs)(s.p,{children:["You can install the chart using the ",(0,r.jsx)(s.code,{children:"helm install"})," command. You must provide your own values, either with ",(0,r.jsx)(s.code,{children:"--set"})," flags\nor a custom values file (",(0,r.jsx)(s.code,{children:"-f my-values.yaml"}),")."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Example installing with a custom values file from the examples\nhelm install geopulse ./helm/geopulse -f helm/examples/medium-deployment.yaml\n"})}),"\n",(0,r.jsx)(s.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(s.h3,{id:"common-configuration-examples",children:"Common Configuration Examples"}),"\n",(0,r.jsx)(s.h4,{id:"minimal-setup-local-testing",children:"Minimal Setup (Local Testing)"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:"# minimal-values.yaml\npostgres:\n  persistence:\n    enabled: false\n\nkeygen:\n  persistence:\n    enabled: false\n"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"helm install geopulse ./helm/geopulse -f minimal-values.yaml\n"})}),"\n",(0,r.jsx)(s.h4,{id:"production-setup-with-ingress",children:"Production Setup with Ingress"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:'# production-values.yaml\n# Resource allocation for production\nbackend:\n  replicaCount: 2\n  resources:\n    limits:\n      memory: 2Gi\n      cpu: 2000m\n    requests:\n      memory: 1Gi\n      cpu: 1000m\n\nfrontend:\n  replicaCount: 2\n\npostgres:\n  persistence:\n    enabled: true\n    size: 50Gi\n    storageClass: "fast-ssd"\n  resources:\n    limits:\n      memory: 4Gi\n      cpu: 2000m\n\n# Ingress configuration\ningress:\n  enabled: true\n  className: nginx\n  hostname: geopulse.example.com\n  tls:\n    enabled: true\n    secretName: geopulse-tls\n  annotations:\n    cert-manager.io/cluster-issuer: "letsencrypt-prod"\n    nginx.ingress.kubernetes.io/ssl-redirect: "true"\n\n# Application configuration\nconfig:\n  uiUrl: "https://geopulse.example.com"\n  cookieDomain: ".example.com"\n  authSecureCookies: true\n'})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"helm install geopulse ./helm/geopulse -f production-values.yaml\n"})}),"\n",(0,r.jsx)(s.h4,{id:"enable-mqtt-broker",children:"Enable MQTT Broker"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:'# mqtt-values.yaml\nmosquitto:\n  enabled: true\n  username: mqtt_admin\n  service:\n    type: LoadBalancer  # Or NodePort for external access\n  persistence:\n    enabled: true\n\nconfig:\n  # Update UI URL if needed\n  uiUrl: "http://your-domain:5555"\n'})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"helm install geopulse ./helm/geopulse -f mqtt-values.yaml\n"})}),"\n",(0,r.jsx)(s.h4,{id:"use-external-postgresql",children:"Use External PostgreSQL"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:'# external-db-values.yaml\npostgres:\n  enabled: false\n\nexternalPostgres:\n  host: postgres.example.com\n  port: 5432\n  database: geopulse\n  username: geopulse-user\n  password: "your-secure-password"\n'})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"helm install geopulse ./helm/geopulse -f external-db-values.yaml\n"})}),"\n",(0,r.jsx)(s.h4,{id:"enable-oidc-authentication",children:"Enable OIDC Authentication"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:'# oidc-values.yaml\nconfig:\n  oidc:\n    enabled: true\n    google:\n      enabled: true\n      clientId: "your-google-client-id"\n      clientSecret: "your-google-client-secret"\n    microsoft:\n      enabled: true\n      clientId: "your-microsoft-client-id"\n      clientSecret: "your-microsoft-client-secret"\n'})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"helm install geopulse ./helm/geopulse -f oidc-values.yaml\n"})}),"\n",(0,r.jsx)(s.h2,{id:"configuration-parameters",children:"Configuration Parameters"}),"\n",(0,r.jsx)(s.h3,{id:"global-parameters",children:"Global Parameters"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parameter"}),(0,r.jsx)(s.th,{children:"Description"}),(0,r.jsx)(s.th,{children:"Default"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"global.imagePullPolicy"})}),(0,r.jsx)(s.td,{children:"Image pull policy"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"IfNotPresent"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"global.imagePullSecrets"})}),(0,r.jsx)(s.td,{children:"Image pull secrets"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"[]"})})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"backend-parameters",children:"Backend Parameters"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parameter"}),(0,r.jsx)(s.th,{children:"Description"}),(0,r.jsx)(s.th,{children:"Default"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"backend.image.repository"})}),(0,r.jsx)(s.td,{children:"Backend image repository"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"tess1o/geopulse-backend"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"backend.image.tag"})}),(0,r.jsx)(s.td,{children:"Backend image tag"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"1.2.1-native"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"backend.replicaCount"})}),(0,r.jsx)(s.td,{children:"Number of backend replicas"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"1"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"backend.service.type"})}),(0,r.jsx)(s.td,{children:"Backend service type"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"ClusterIP"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"backend.service.port"})}),(0,r.jsx)(s.td,{children:"Backend service port"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"8080"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"backend.resources.limits.memory"})}),(0,r.jsx)(s.td,{children:"Backend memory limit"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"1Gi"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"backend.resources.limits.cpu"})}),(0,r.jsx)(s.td,{children:"Backend CPU limit"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"1000m"})})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"frontend-parameters",children:"Frontend Parameters"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parameter"}),(0,r.jsx)(s.th,{children:"Description"}),(0,r.jsx)(s.th,{children:"Default"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"frontend.image.repository"})}),(0,r.jsx)(s.td,{children:"Frontend image repository"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"tess1o/geopulse-ui"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"frontend.image.tag"})}),(0,r.jsx)(s.td,{children:"Frontend image tag"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"1.2.1"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"frontend.replicaCount"})}),(0,r.jsx)(s.td,{children:"Number of frontend replicas"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"1"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"frontend.service.type"})}),(0,r.jsx)(s.td,{children:"Frontend service type"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"ClusterIP"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"frontend.service.port"})}),(0,r.jsx)(s.td,{children:"Frontend service port"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"80"})})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"postgresql-parameters",children:"PostgreSQL Parameters"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parameter"}),(0,r.jsx)(s.th,{children:"Description"}),(0,r.jsx)(s.th,{children:"Default"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"postgres.enabled"})}),(0,r.jsx)(s.td,{children:"Deploy PostgreSQL"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"true"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"postgres.image.repository"})}),(0,r.jsx)(s.td,{children:"PostgreSQL image"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"postgis/postgis"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"postgres.image.tag"})}),(0,r.jsx)(s.td,{children:"PostgreSQL image tag"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"17-3.5"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"postgres.persistence.enabled"})}),(0,r.jsx)(s.td,{children:"Enable persistence"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"true"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"postgres.persistence.size"})}),(0,r.jsx)(s.td,{children:"PVC size"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"10Gi"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"postgres.persistence.storageClass"})}),(0,r.jsx)(s.td,{children:"Storage class"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:'""'})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"postgres.database"})}),(0,r.jsx)(s.td,{children:"Database name"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"geopulse"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"postgres.username"})}),(0,r.jsx)(s.td,{children:"Database username"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"geopulse-user"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"postgres.config.sharedBuffers"})}),(0,r.jsx)(s.td,{children:"PostgreSQL shared_buffers"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"256MB"})})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"mqtt-mosquitto-parameters",children:"MQTT (Mosquitto) Parameters"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parameter"}),(0,r.jsx)(s.th,{children:"Description"}),(0,r.jsx)(s.th,{children:"Default"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"mosquitto.enabled"})}),(0,r.jsx)(s.td,{children:"Deploy MQTT broker"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"false"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"mosquitto.image.repository"})}),(0,r.jsx)(s.td,{children:"Mosquitto image"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"iegomez/mosquitto-go-auth"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"mosquitto.image.tag"})}),(0,r.jsx)(s.td,{children:"Mosquitto image tag"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"3.0.0-mosquitto_2.0.18"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"mosquitto.username"})}),(0,r.jsx)(s.td,{children:"MQTT admin username"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"geopulse_mqtt_admin"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"mosquitto.persistence.enabled"})}),(0,r.jsx)(s.td,{children:"Enable persistence"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"true"})})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"ingress-parameters",children:"Ingress Parameters"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parameter"}),(0,r.jsx)(s.th,{children:"Description"}),(0,r.jsx)(s.th,{children:"Default"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"ingress.enabled"})}),(0,r.jsx)(s.td,{children:"Enable ingress"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"false"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"ingress.className"})}),(0,r.jsx)(s.td,{children:"Ingress class name"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"nginx"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"ingress.hostname"})}),(0,r.jsx)(s.td,{children:"Hostname"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"geopulse.example.com"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"ingress.tls.enabled"})}),(0,r.jsx)(s.td,{children:"Enable TLS"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"false"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"ingress.tls.secretName"})}),(0,r.jsx)(s.td,{children:"TLS secret name"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"geopulse-tls"})})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"application-configuration",children:"Application Configuration"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parameter"}),(0,r.jsx)(s.th,{children:"Description"}),(0,r.jsx)(s.th,{children:"Default"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"config.uiUrl"})}),(0,r.jsx)(s.td,{children:"Frontend URL (for CORS)"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"http://localhost:5555"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"config.cookieDomain"})}),(0,r.jsxs)(s.td,{children:["Cookie domain for authentication. ",(0,r.jsx)(s.strong,{children:"Keep empty for standard nginx-based deployments."})," Only set for non-standard deployments without nginx using separate subdomains."]}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:'""'})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"config.authSecureCookies"})}),(0,r.jsx)(s.td,{children:"Use secure cookies (HTTPS only)"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"false"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"config.oidc.enabled"})}),(0,r.jsx)(s.td,{children:"Enable OIDC"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"false"})})]})]})]}),"\n",(0,r.jsxs)(s.p,{children:["For a complete list of parameters, see ",(0,r.jsx)(s.code,{children:"values.yaml"})]}),"\n",(0,r.jsx)(s.h2,{id:"upgrading",children:"Upgrading"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Upgrade to a new version\nhelm upgrade geopulse ./helm/geopulse\n\n# Upgrade with new values\nhelm upgrade geopulse ./helm/geopulse -f my-values.yaml\n"})}),"\n",(0,r.jsx)(s.h2,{id:"uninstalling",children:"Uninstalling"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"helm uninstall geopulse\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Note"}),": This will not delete PersistentVolumeClaims. To delete them:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"kubectl delete pvc -l app.kubernetes.io/instance=geopulse\n"})}),"\n",(0,r.jsx)(s.h2,{id:"testing",children:"Testing"}),"\n",(0,r.jsx)(s.p,{children:"Run the included Helm tests to verify the deployment:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"helm test geopulse\n"})}),"\n",(0,r.jsx)(s.h2,{id:"accessing-geopulse",children:"Accessing GeoPulse"}),"\n",(0,r.jsx)(s.h3,{id:"with-ingress",children:"With Ingress"}),"\n",(0,r.jsx)(s.p,{children:"Access via the configured hostname:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"https://geopulse.example.com\n"})}),"\n",(0,r.jsx)(s.h3,{id:"without-ingress-port-forward",children:"Without Ingress (Port Forward)"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"kubectl port-forward svc/geopulse-frontend 5555:80\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Then visit: ",(0,r.jsx)(s.a,{href:"http://localhost:5555",children:"http://localhost:5555"})]}),"\n",(0,r.jsx)(s.h3,{id:"with-loadbalancer",children:"With LoadBalancer"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"kubectl get svc geopulse-frontend\n# Note the EXTERNAL-IP and access via http://EXTERNAL-IP\n"})}),"\n",(0,r.jsx)(s.h2,{id:"persistence",children:"Persistence"}),"\n",(0,r.jsx)(s.p,{children:"GeoPulse uses PersistentVolumeClaims for:"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"PostgreSQL data"})," (",(0,r.jsx)(s.code,{children:"10Gi"})," by default)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"JWT keys"})," (",(0,r.jsx)(s.code,{children:"10Mi"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"MQTT data"})," (if enabled, ",(0,r.jsx)(s.code,{children:"1Gi"})," for data, logs, config)"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Configure storage classes and sizes in ",(0,r.jsx)(s.code,{children:"values.yaml"}),"."]}),"\n",(0,r.jsx)(s.h2,{id:"security",children:"Security"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Passwords are auto-generated if not provided"}),"\n",(0,r.jsx)(s.li,{children:"JWT keys are generated during installation"}),"\n",(0,r.jsx)(s.li,{children:"Secrets are stored in Kubernetes Secret objects"}),"\n",(0,r.jsxs)(s.li,{children:["Use existing secrets with: ",(0,r.jsx)(s.code,{children:"secrets.useExistingSecret=true"})]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"monitoring",children:"Monitoring"}),"\n",(0,r.jsx)(s.p,{children:"Check pod status:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"kubectl get pods -l app.kubernetes.io/instance=geopulse\n"})}),"\n",(0,r.jsx)(s.p,{children:"View logs:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Backend\nkubectl logs -l app.kubernetes.io/component=backend -f\n\n# Frontend\nkubectl logs -l app.kubernetes.io/component=frontend -f\n\n# PostgreSQL\nkubectl logs -l app.kubernetes.io/component=database -f\n"})}),"\n",(0,r.jsx)(s.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(s.h3,{id:"pods-not-starting",children:"Pods not starting"}),"\n",(0,r.jsx)(s.p,{children:"Check events:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"kubectl get events --sort-by='.lastTimestamp'\n"})}),"\n",(0,r.jsx)(s.h3,{id:"database-connection-issues",children:"Database connection issues"}),"\n",(0,r.jsx)(s.p,{children:"Verify PostgreSQL is running:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"kubectl get pods -l app.kubernetes.io/component=database\nkubectl logs -l app.kubernetes.io/component=database\n"})}),"\n",(0,r.jsx)(s.h3,{id:"jwt-key-issues",children:"JWT key issues"}),"\n",(0,r.jsx)(s.p,{children:"Check keygen job:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"kubectl get jobs\nkubectl logs job/geopulse-keygen\n"})}),"\n",(0,r.jsx)(s.h3,{id:"mqtt-not-working",children:"MQTT not working"}),"\n",(0,r.jsx)(s.p,{children:"Ensure MQTT is enabled and check logs:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"kubectl logs -l app.kubernetes.io/component=mqtt\n"})}),"\n",(0,r.jsx)(s.h2,{id:"support",children:"Support"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Documentation: ",(0,r.jsx)(s.a,{href:"https://github.com/tess1o/geopulse/tree/main/docs",children:"https://github.com/tess1o/geopulse/tree/main/docs"})]}),"\n",(0,r.jsxs)(s.li,{children:["Issues: ",(0,r.jsx)(s.a,{href:"https://github.com/tess1o/geopulse/issues",children:"https://github.com/tess1o/geopulse/issues"})]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"license",children:"License"}),"\n",(0,r.jsx)(s.p,{children:"AGPL-3.0 with Non-Commercial Use Restriction"})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>d});var l=n(6540);const r={},i=l.createContext(r);function t(e){const s=l.useContext(i);return l.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),l.createElement(i.Provider,{value:s},e.children)}}}]);